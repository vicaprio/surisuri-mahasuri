<!DOCTYPE html>
<html>
<head>
    <title>OAuth URL ë””ë²„ê¹…</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 900px;
            margin: 50px auto;
            padding: 20px;
        }
        pre {
            background: #f4f4f4;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            white-space: pre-wrap;
            word-wrap: break-word;
        }
        button {
            background: #4285f4;
            color: white;
            padding: 10px 20px;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-size: 16px;
        }
        button:hover {
            background: #357ae8;
        }
        .section {
            margin: 20px 0;
            padding: 15px;
            border: 1px solid #ddd;
            border-radius: 5px;
        }
        .highlight {
            background: yellow;
            padding: 2px 5px;
            border-radius: 3px;
        }
    </style>
</head>
<body>
    <h1>ğŸ” Google OAuth URL ë””ë²„ê¹…</h1>

    <div class="section">
        <h2>1. í˜„ì¬ ì„¤ì • í™•ì¸</h2>
        <button onclick="checkUrl()">URL ìƒì„± ë° í™•ì¸</button>
        <pre id="output"></pre>
    </div>

    <div class="section">
        <h2>2. Google Cloud Consoleì— ë“±ë¡í•´ì•¼ í•  ê°’</h2>
        <p><strong>ìŠ¹ì¸ëœ JavaScript ì›ë³¸:</strong></p>
        <pre id="origin"></pre>

        <p><strong>ìŠ¹ì¸ëœ ë¦¬ë””ë ‰ì…˜ URI:</strong></p>
        <pre id="redirectUri"></pre>
    </div>

    <div class="section">
        <h2>3. í…ŒìŠ¤íŠ¸</h2>
        <p>ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ë©´ ì‹¤ì œ Google OAuth í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤:</p>
        <button onclick="testOAuth()">Google OAuth í…ŒìŠ¤íŠ¸</button>
    </div>

    <script>
        const googleClientId = '328518017006-0v2a07jbnabopvlkd005fsicknlk1rp4.apps.googleusercontent.com';

        function checkUrl() {
            const baseUrl = window.location.origin;
            const redirectUri = `${baseUrl}/oauth/google/callback`;
            const encodedRedirectUri = encodeURIComponent(redirectUri);

            const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${googleClientId}&redirect_uri=${encodedRedirectUri}&response_type=code&scope=openid%20email%20profile`;

            document.getElementById('output').textContent =
                'í˜„ì¬ í˜ì´ì§€ Origin: ' + baseUrl + '\n\n' +
                'Redirect URI (ì›ë³¸): ' + redirectUri + '\n\n' +
                'Redirect URI (URL ì¸ì½”ë”©): ' + encodedRedirectUri + '\n\n' +
                'ì „ì²´ OAuth URL:\n' + authUrl;

            document.getElementById('origin').textContent = baseUrl;
            document.getElementById('redirectUri').textContent = redirectUri;

            console.log('=== OAuth Debug Info ===');
            console.log('Origin:', baseUrl);
            console.log('Redirect URI:', redirectUri);
            console.log('Encoded:', encodedRedirectUri);
            console.log('Full URL:', authUrl);
        }

        function testOAuth() {
            const baseUrl = window.location.origin;
            const redirectUri = `${baseUrl}/oauth/google/callback`;
            const authUrl = `https://accounts.google.com/o/oauth2/v2/auth?client_id=${googleClientId}&redirect_uri=${encodeURIComponent(redirectUri)}&response_type=code&scope=openid%20email%20profile`;

            window.location.href = authUrl;
        }

        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.onload = checkUrl;
    </script>
</body>
</html>
